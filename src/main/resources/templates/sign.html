<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>Dexterity — Registration</title>

	<link rel="stylesheet" type="text/css" th:href="@{css/au.css}" href="../static/css/au.css">
	<link rel="stylesheet" type="text/css" th:href="@{css/common.css}" href="../static/css/common.css">
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;500;600&display=swap" rel="stylesheet">
</head>
<body onload="showError()">
<div class="limiter">
	<div class="wrapper">
		<div class="form-content">
      <span id="title" class="title">
          <a class="logo" th:href="@{/}" href="../templates/index.html">
              DEXTERITY
          </a>
      </span>
			<form action="/sign" method="post" th:object="${credential}">
				<input th:field="*{email}" style="margin-bottom: 25px" type="email" placeholder="E-Mail"/>
				<input id="login" th:field="*{login}" type="text" placeholder="Логин"/>
				<input id="password" th:field="*{password}" type="password" placeholder="Пароль"/>
				<input id="confirm_password" th:field="*{confirmPassword}" type="password" placeholder="Подтверждение пароля"/>
				<p th:if="${authError != null}" th:text="${authError.getDescription()}" class="error"></p>
				<input class="btn" type="submit" value="Зарегистрироваться">
				<div class="link">
					<span>Уже имеете аккаунт?</span>
					<a th:href="@{/login}" href="../templates/login.html">
						Войти
					</a>
				</div>
			</form>

		</div>
	</div>
</div>

<script type="text/javascript" th:src="@{js/jquery.js}" src="../static/js/jquery.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<script>

	function showError() {
		let $error = $('.error');

		if ($error.length !== 0) {
			swal({
				title: "Ошибка",
				text: $error.text(),
				icon: "error",
				className: "alert",
				button: {
					className: "alert_btn"
				}
			});
		}
	}

	setTimeout(function () {
		$('.error').css('opacity', '0');

		setTimeout(function () {
			$('.error').remove();
		}, 1000);

	}, 3000);

</script>
</body>
</html>