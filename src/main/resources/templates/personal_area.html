<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>Title</title>

	<link rel="stylesheet" type="text/css" th:href="@{../css/personal-area.css}" href="../static/css/personal-area.css">
	<link rel="stylesheet" type="text/css" th:href="@{../css/common.css}" href="../static/css/common.css">
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;500;600&display=swap" rel="stylesheet">
</head>
<body>

<div class="limiter">
	<div class="wrapper">
		<!--                Верхняя панель-->
		<div class="top_panel">

			<div class="panel_section">
				<!--                    Логотип в верхней панели-->
				<div class="logo_container">
					<a class="logo" th:href="@{/}" href="index.html">
						DEXTERITY
					</a>
				</div>
			</div>

			<div class="panel_section">
				<!--                    Фото профиля (выпадающий список)-->
				<p class="profile_username">
					<th:block th:text="${username.toString()}"></th:block>
				</p>
				<div class="experience"
				     th:if="${userExist == true}"
				     th:text="${level} + ' уровень'"
				     th:style="'background: linear-gradient(to right, #646200 ' + (${experience} / 1000 * 100) * 0.75 + '%, transparent ' + (${experience} / 1000 * 100) + '%);'">
				</div>
				<nav class="profile">
					<ul>
						<li>
							<img th:if="${!#strings.equals(username, 'anonymousUser')}" th:src="'images/' + ${filename.toString()}" class="profile_photo"/>
							<img class="profile_photo" th:if="${#strings.equals(username, 'anonymousUser')}" th:src="@{/images/anon.jpg}" src="../static/images/anon.jpg"/>
							<ul>
								<li>
									<a th:href="@{/personal_area}" href="personal_area.html">Личный кабинет</a>
								</li>
								<li>
									<a th:href="@{/rating}" href="rating.html">Рейтинг</a>
								</li>
								<th:block th:if="${#strings.equals(role, 'MODER')}">
									<li>
										<a th:href="@{/moderation_list}" href="moderation_list.html">Модерация</a>
									</li>
								</th:block>
								<th:block th:if="${!#strings.equals(username, 'anonymousUser')}">
									<li>
										<a th:href="@{/logout}">Выйти</a>
									</li>
								</th:block>
								<th:block th:if="${#strings.equals(username, 'anonymousUser')}">
									<li>
										<a th:href="@{/login}" href="login.html">Войти</a>
									</li>
								</th:block>
							</ul>
						</li>
					</ul>
				</nav>
			</div>
		</div>

		<div class="personal_main">
			<div class="personal_info">
				<div class="personal_photo">
					<img class="profile_photo" th:if="${!#strings.equals(username, 'anonymousUser')}" th:src="'../images/' + ${filename.toString()}"/>
					<img th:if="${#strings.equals(username, 'anonymousUser')}" th:src="@{images/anon.jpg}" src="../static/images/anon.jpg"/>
				</div>
				<span th:text="${username}">Ulxanxv</span>
				<div class="personal_edit">
					<form method="post" enctype="multipart/form-data" action="/file/upload">
						<div>
							<input type="file" name="file" id="input" class="input_file">
							<label for="input">
								<span class="input__file-button-text">Загрузить фото</span>
							</label>
						</div>
						<div>
							<button class="input__file-button-text" type="submit">Сохранить</button>
						</div>
					</form>
				</div>
			</div>

			<div class="personal_rating">
				<div class="block_header">
					Решенные задачи
				</div>
				<!--                        Блок самого задания-->
				<div class="task_body">
					<th:block th:each="decidedTask : ${decidedTaskList}">
						<div class="task">
							<a class="tb_text" th:text="${decidedTask.getTask().getShortDescription()}"></a>
							<th:block th:switch="${decidedTask.getTask().getDifficult()}">
								<span th:case="1" style="color: #006400FF">Легко</span>
								<span th:case="2" style="color: #646200">Средне</span>
								<span th:case="3" style="color: #640000">Трудно</span>
							</th:block>
						</div>
					</th:block>
				</div>
			</div>
		</div>
	</div>
</div>

</body>
</html>